{% extends 'base.html' %}
{% block title %}
    Homepage - {{ block.super }}
{% endblock title %}

{% block content %}

<div>
	<div class="destination-slides">
  	{% for upload in uploads %}
		<div>
			<img src="{{ upload.image.url }}" alt="" height="auto" width="100%" />
		</div>
	{% endfor %}
</div>

<div class="row destination">
	<div class="large-8 columns">
		<span class="name--structure"><a href="{% url 'province_detail' slug=destination.province.slug %}" class="name--structure">{{ destination.province }}</a>&nbsp;&nbsp;>&nbsp;&nbsp;<a href="{% url 'muni_detail' slug=destination.muni.slug %}" class="name--structure">{{ destination.muni }}</a></span>
		<h4 class="destination--name--heading">{{ destination.name }}</h4>
		<h7 class="address">{{ destination.address }}</h7>
		<p class="coords">{{ destination.coords }}</p>
		<p class="posted--by">POSTED BY:</p>
		<p class="posted--by--name">Ronald Ponferrada</p>
		<p class="description">{{ destination.description }}</p>
		
		<div class="review-container">
			<p class="added--by">{{ destination.average_rating | floatformat }} STARS ({{ destination.review_set.count }} REVIEW{{ estination.review_set.count|length|pluralize|title  }})</p>
		</div>
		
		<div class="review-container">
			{% if destination.review_set.all %}
			<div>
				{% for review in destination.review_set.all %}
				<div>
					<em>{{ review.comment }}</em> - {{ review.rating }} STARS
					<p class="added--by">BY {{ review.user }}</p>
				</div>
				{% endfor %}
			</div>
			{% else %}
			<p>No reviews for this destination yet</p>
			{% endif %}
		</div>
	
		<div class="review-container">
			{% if user.is_authenticated %}
				<form action="{% url 'add_review' destination.id %}" method="post">
					{% csrf_token %}
					{{ form.as_p }}
					<input class="added--by" type="submit" value="LEAVE A REVIEW" />
				</form>
			{% else %}
				<p>Please <a href="{% url 'auth_login' %}">log in</a> to leave a comment.</p>
			{% endif %}
		</div>
		
	</div>
	<div class="large-4 columns">
		<div class="map"></div>
		<div class="sub-heading--box--container">
			<h6 class="destination--sub-heading">Activities</h6>
			<div class="activities-container"></div>
			<p class="activities-value">{{ destination.activities }}</p>
		</div>
		<div class="sub-heading--box--container">
			<h6 class="destination--sub-heading">Features</h6>
			<div class="features-container"></div>
			<p class="features-value">{{ destination.features }}</p>
		</div>
		<div class="sub-heading--box--container">
			<h6 class="destination--sub-heading">Amenities & Miscellaneous</h6>
			<div class="misc-container"></div>
			<p class="misc-value">{{ destination.misc }}</p>
		</div>
	</div>
</div>

{% endblock content %}